<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö: ‡∏û‡∏∑‡∏ä‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß / ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ñ‡∏π‡πà (30 ‡∏Ç‡πâ‡∏≠) ‚Ä¢ ‡∏ú‡∏™‡∏°‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß/‡∏Ñ‡∏π‡πà‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô</title>
  <style>
    :root{ --primary:#16a34a; --primary-dark:#15803d; --bg:#f0fdf4; --card:#ffffff; --text:#0b1420; --muted:#64748b; --ok:#16a34a; --bad:#dc2626; --barbg:#bbf7d0; --chip:#dcfce7; --chip2:#fee2e2; }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0; font-family:"Noto Sans Thai", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif; background: var(--bg); color:var(--text); line-height:1.6;}
    .brandbar{width:100%; background:linear-gradient(90deg,var(--primary) 0%, var(--primary-dark) 100%); color:#fff; padding:10px 16px; display:flex; align-items:center; justify-content:center; position:sticky; top:0; z-index:10; box-shadow:0 6px 18px rgba(21,128,61,.25);}
    .brandbar .logo{font-weight:900; display:flex; align-items:center; gap:8px; font-size:18px}
    .container{max-width:900px; margin:22px auto 80px; padding:0 16px}
    .card{background:var(--card); border:2px solid #bbf7d0; border-radius:24px; box-shadow:0 14px 36px rgba(21,128,61,.12); overflow:hidden;}
    .card-head{padding:20px 22px; border-bottom:1px solid #e2e8f0; display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap}
    .title{font-size:22px; font-weight:900; color:var(--primary-dark)}
    .subtitle{font-size:14px; color:var(--muted)}
    .card-body{padding:22px}
    .start{display:grid; gap:16px; justify-items:center; text-align:center; padding:28px 18px 36px}
    .input-row{display:flex; gap:10px; width:100%; max-width:520px}
    input[type="text"]{flex:1; padding:12px 14px; border:1.5px solid #e2e8f0; border-radius:14px; font-size:16px; outline:none; background:#ffffff}
    input[type="text"]:focus{border-color:var(--primary)}
    .btn{appearance:none; border:none; background:var(--primary); color:#fff; padding:12px 18px; border-radius:14px; font-weight:900; font-size:16px; cursor:pointer; transition:.15s transform ease, .2s background ease, .2s box-shadow ease; box-shadow:0 8px 22px rgba(21,128,61,.25);}
    .btn:hover{background:var(--primary-dark); transform:translateY(-1px)}
    .btn-outline{background:#fff; color:var(--primary); border:2px solid var(--primary); box-shadow:none}
    .btn-accent{background:#22c55e; color:#fff}
    .meta{display:flex; gap:10px; align-items:center; color:var(--muted); font-size:14px}
    .dot{width:6px; height:6px; background:var(--muted); border-radius:50%}
    .progress-wrap{width:100%; background:var(--barbg); height:10px; border-radius:999px; overflow:hidden}
    .progress{height:100%; width:0%; background:var(--primary); transition:width .25s ease}
    .pill{display:inline-flex; align-items:center; gap:8px; border:1px solid #bbf7d0; background:#f0fdf4; color:#065f46; padding:6px 10px; border-radius:999px; font-weight:800; font-size:14px}
    .qtext{font-size:20px; font-weight:800; margin:10px 0 14px}
    .options{display:grid; gap:10px; margin:10px 0 6px}
    .opt{border:1.5px solid #e2e8f0; background:#ffffff; border-radius:16px; padding:12px 14px; display:flex; align-items:center; gap:10px; cursor:pointer; transition:border .15s ease, background .15s ease}
    .opt:hover{border-color:var(--primary)}
    .opt input{appearance:none; width:22px; height:22px; border:2px solid var(--primary); border-radius:50%; position:relative; flex:0 0 22px; background:#fff}
    .opt input:checked{background:var(--primary)}
    .opt input:checked::after{content:""; position:absolute; inset:5px; background:#fff; border-radius:50%}
    .opt .letter{font-weight:900; color:var(--primary); min-width:28px}
    .nav-row{display:flex; justify-content:space-between; gap:10px; margin-top:16px; flex-wrap:wrap}
    .center{display:flex; justify-content:center}
    .hidden{display:none !important}
    .score-big{font-size:40px; font-weight:900; color:var(--primary-dark); margin:6px 0 2px; text-align:center}
    .muted{color:var(--muted)}
    .result-list{display:grid; gap:14px; margin-top:16px}
    .result-item{border:1px solid #e2e8f0; border-left:6px solid var(--bad); border-radius:16px; padding:12px 14px; background:#fff}
    .result-item.ok{border-left-color:var(--ok)}
    .item-head{display:flex; justify-content:space-between; gap:8px; align-items:center; flex-wrap:wrap}
    .answer-line{font-size:14px; margin-top:4px}
    .explain{font-size:14px; color:#334155; margin-top:6px}
    .grid-know{display:grid; grid-template-columns:repeat(auto-fill,minmax(180px,1fr)); gap:10px; margin-top:14px}
    .chip{padding:8px 10px; border-radius:12px; border:1px solid #e5e7eb; background:#dcfce7; font-size:14px; font-weight:700; display:flex; justify-content:space-between; align-items:center}
    .chip.dico{background:#fee2e2; color:#991b1b}
    .footer-brand{text-align:center; color:var(--muted); font-size:13px; padding:14px 8px}
    @media (max-width:520px){ .title{font-size:19px} .qtext{font-size:18px} .btn{width:100%} }
  </style>
</head>
<body>
  <div class="brandbar"><div class="logo">üåø <span>Kru Pai Classroom</span></div></div>
  <div class="container">
    <div class="card" id="card">
      <div class="card-head">
        <div>
          <div class="title">‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö: ‡∏à‡∏≥‡πÅ‡∏ô‡∏Å‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏û‡∏∑‡∏ä‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß/‡∏Ñ‡∏π‡πà</div>
          <div class="subtitle">30 ‡∏Ç‡πâ‡∏≠ ‚Ä¢ ‡∏ú‡∏™‡∏° ‚Äú‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß/‡∏Ñ‡∏π‡πà‚Äù ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏£‡∏ß‡∏î ‚Ä¢ ‡∏ï‡∏£‡∏ß‡∏à‡∏ó‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß + ‡πÄ‡∏â‡∏•‡∏¢‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•</div>
        </div>
        <div class="meta">
          <span id="playerNameMeta" class="hidden"></span>
          <span class="dot"></span>
          <span id="progressMeta">‡∏Ç‡πâ‡∏≠ <span id="qIndexMeta">0</span>/<span id="qTotalMeta">0</span></span>
        </div>
      </div>
      <div class="card-body">
        <section id="screen-start" class="start">
          <h2 style="margin:0; font-size:24px; font-weight:900; color:var(--primary-dark)">‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≥‡∏£‡∏ß‡∏à‡πÇ‡∏•‡∏Å‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡∏ä‡∏Å‡∏±‡∏ô‡πÑ‡∏´‡∏°? üå±üå∏</h2>
          <p class="muted" style="margin:0 0 8px">‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠ (‡∏°‡∏µ‡πÄ‡∏â‡∏•‡∏¢‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ï‡∏≠‡∏ô‡∏à‡∏ö)</p>
          <div class="input-row">
            <input type="text" id="playerName" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" />
            <button class="btn btn-accent" id="btnStart">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
          </div>
          <div class="footer-brand">¬© Kru Pai Classroom ‚Äî ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤ üåø</div>
        </section>

        <section id="screen-quiz" class="hidden">
          <div class="progress-wrap" aria-hidden="true"><div class="progress" id="progressBar"></div></div>
          <div id="qWrap" style="margin-top:16px">
            <div class="pill" id="pillIdx">‡∏Ç‡πâ‡∏≠ 1/30</div>
            <div class="qtext" id="qText">...</div>
            <div class="options" id="optWrap"></div>
          </div>

          <div class="nav-row">
            <button class="btn btn-outline" id="btnPrev">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
            <div style="display:flex; gap:10px">
              <button class="btn btn-outline" id="btnSave">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
              <button class="btn" id="btnNext">‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡πÑ‡∏õ ‚û°</button>
            </div>
          </div>

          <div class="center" style="margin-top:12px">
            <button class="btn btn-accent hidden" id="btnFinish">‡∏ó‡∏≥‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‚Ä¢ ‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
          </div>
          <div class="footer-brand">¬© Kru Pai Classroom ‚Äî ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤ üåø</div>
        </section>

        <section id="screen-result" class="hidden">
          <div style="text-align:center">
            <div class="score-big" id="scoreBig">0/30</div>
            <div class="muted" id="scoreLine">‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏°‡∏≤‡∏Å! ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å‡πÄ‡∏•‡∏¢ üéâ</div>
            <div style="margin-top:12px"><button class="btn" id="btnRetry">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button></div>
          </div>
          <h3 style="margin-top:18px; color:var(--primary-dark)">‡πÄ‡∏â‡∏•‡∏¢‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</h3>
          <div class="result-list" id="resultList"></div>

          <h3 style="margin-top:24px; color:var(--primary-dark)">‡∏Ñ‡∏•‡∏±‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ: ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏û‡∏∑‡∏ä 30 ‡∏ä‡∏ô‡∏¥‡∏î</h3>
          <p class="muted" style="margin-top:-6px">‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏∑‡∏ä‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡πÅ‡∏ô‡∏Å‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß/‡∏Ñ‡∏π‡πà ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏û‡∏∑‡∏ä‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô</p>
          <div class="grid-know" id="knowGrid"></div>
        </section>
      </div>
    </div>
  </div>

<script>
// ========= Question Bank (30 items) =========
let QUESTIONS = [
  // 10 ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏û‡∏∑‡∏ä
  {q:"‡πÄ‡∏™‡πâ‡∏ô‡πÉ‡∏ö‡∏Ç‡∏ô‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà", mono:true,  exp:"‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß‡∏°‡∏±‡∏Å‡∏°‡∏µ‡πÄ‡∏™‡πâ‡∏ô‡πÉ‡∏ö‡∏Ç‡∏ô‡∏≤‡∏ô (‡πÄ‡∏ä‡πà‡∏ô ‡∏´‡∏ç‡πâ‡∏≤/‡∏Ç‡πâ‡∏≤‡∏ß)"},
  {q:"‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏≤‡∏Å‡∏ù‡∏≠‡∏¢ (‡∏£‡∏≤‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å ‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏Å‡∏±‡∏ô)", mono:true, exp:"‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß‡∏°‡∏±‡∏Å‡∏°‡∏µ‡∏£‡∏≤‡∏Å‡∏ù‡∏≠‡∏¢ ‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ñ‡∏π‡πà‡∏°‡∏±‡∏Å‡∏°‡∏µ‡∏£‡∏≤‡∏Å‡πÅ‡∏Å‡πâ‡∏ß"},
  {q:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏•‡∏µ‡∏ö‡∏î‡∏≠‡∏Å‡∏°‡∏±‡∏Å‡πÄ‡∏õ‡πá‡∏ô 3 ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö 3", mono:true,  exp:"‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡∏≠‡∏Å‡∏Ç‡∏≠‡∏á‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß‡∏°‡∏±‡∏Å‡πÄ‡∏õ‡πá‡∏ô 3 ‡∏´‡∏£‡∏∑‡∏≠ 6"},
  {q:"‡∏ó‡πà‡∏≠‡∏•‡∏≥‡πÄ‡∏•‡∏µ‡∏¢‡∏á‡πÉ‡∏ô‡∏•‡∏≥‡∏ï‡πâ‡∏ô‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏ó‡∏±‡πà‡∏ß ‡πÜ ‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏á", mono:true,  exp:"‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß‡∏ó‡πà‡∏≠‡∏•‡∏≥‡πÄ‡∏•‡∏µ‡∏¢‡∏á‡∏Å‡∏£‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢ ‡πÅ‡∏¢‡∏Å‡∏ß‡∏á‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ"},
  {q:"‡∏°‡∏µ‡∏ß‡∏á‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏á (cambium) ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÇ‡∏ï‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏°‡πâ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÅ‡∏Ç‡πá‡∏á", mono:false, exp:"‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ñ‡∏π‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å‡∏°‡∏µ‡∏ß‡∏á‡πÄ‡∏à‡∏£‡∏¥‡∏ç ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏•‡∏≥‡∏ï‡πâ‡∏ô‡∏´‡∏ô‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏á‡∏õ‡∏µ"},
  {q:"‡πÄ‡∏™‡πâ‡∏ô‡πÉ‡∏ö‡πÅ‡∏ï‡∏Å‡πÅ‡∏Ç‡∏ô‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏£‡πà‡∏≤‡∏á‡πÅ‡∏´", mono:false, exp:"‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡πÄ‡∏î‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ñ‡∏π‡πà‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏™‡πâ‡∏ô‡πÉ‡∏ö‡πÅ‡∏ö‡∏ö‡∏£‡πà‡∏≤‡∏á‡πÅ‡∏´"},
  {q:"‡πÉ‡∏ö‡∏°‡∏µ ‚Äú‡∏Å‡∏≤‡∏ö‡πÉ‡∏ö‚Äù ‡∏´‡∏∏‡πâ‡∏°‡πÇ‡∏Ñ‡∏ô‡∏•‡∏≥‡∏ï‡πâ‡∏ô‡πÄ‡∏î‡πà‡∏ô", mono:true,  exp:"‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡∏ô‡∏¥‡∏î (‡πÄ‡∏ä‡πà‡∏ô ‡∏´‡∏ç‡πâ‡∏≤/‡∏Ç‡πâ‡∏≤‡∏ß) ‡∏°‡∏µ‡πÇ‡∏Ñ‡∏ô‡πÉ‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏ö‡∏´‡∏∏‡πâ‡∏°"},
  {q:"‡πÄ‡∏°‡∏•‡πá‡∏î‡∏°‡∏µ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á 2 ‡πÉ‡∏ö", mono:false, exp:"‡∏Ñ‡∏≥‡∏ô‡∏¥‡∏¢‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ñ‡∏π‡πà (dicot) ‡∏Ñ‡∏∑‡∏≠‡∏°‡∏µ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏™‡∏≠‡∏á‡πÉ‡∏ö"},
  {q:"‡πÄ‡∏°‡∏•‡πá‡∏î‡∏°‡∏µ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á 1 ‡πÉ‡∏ö", mono:true,  exp:"‡∏Ñ‡∏≥‡∏ô‡∏¥‡∏¢‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß (monocot) ‡∏Ñ‡∏∑‡∏≠‡∏°‡∏µ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß"},
  {q:"‡∏•‡∏≥‡∏ï‡πâ‡∏ô‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏õ‡∏•‡πâ‡∏≠‡∏á‡∏ä‡∏±‡∏î ‡∏£‡∏π‡∏õ‡∏ó‡∏£‡∏á‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢‡∏´‡∏ç‡πâ‡∏≤", mono:true,  exp:"‡∏´‡∏ç‡πâ‡∏≤/‡πÑ‡∏ú‡πà ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏ô‡πÅ‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß ‡∏•‡∏≥‡∏ï‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏õ‡∏•‡πâ‡∏≠‡∏á‡∏ä‡∏±‡∏î"},

  // 20 ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏û‡∏∑‡∏ä
  {q:"‡∏Ç‡πâ‡∏≤‡∏ß (Oryza sativa)", mono:true,  exp:"‡∏ß‡∏á‡∏®‡πå‡∏´‡∏ç‡πâ‡∏≤ (Poaceae) ‚Üí ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß"},
  {q:"‡∏Ç‡πâ‡∏≤‡∏ß‡πÇ‡∏û‡∏î (Zea mays)", mono:true,  exp:"‡∏ß‡∏á‡∏®‡πå‡∏´‡∏ç‡πâ‡∏≤ (Poaceae) ‚Üí ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß"},
  {q:"‡∏Å‡∏•‡πâ‡∏ß‡∏¢ (Musa spp.)", mono:true,  exp:"‡∏ß‡∏á‡∏®‡πå‡∏Å‡∏•‡πâ‡∏ß‡∏¢ (Musaceae) ‚Üí ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß"},
  {q:"‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß (Cocos nucifera)", mono:true,  exp:"‡∏ß‡∏á‡∏®‡πå‡∏õ‡∏≤‡∏•‡πå‡∏° (Arecaceae) ‚Üí ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß"},
  {q:"‡πÑ‡∏ú‡πà (Bambusa spp.)", mono:true,  exp:"‡∏ß‡∏á‡∏®‡πå‡∏´‡∏ç‡πâ‡∏≤ ‚Üí ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß"},
  {q:"‡∏™‡∏±‡∏ö‡∏õ‡∏∞‡∏£‡∏î (Ananas comosus)", mono:true,  exp:"‡∏ß‡∏á‡∏®‡πå‡∏™‡∏±‡∏ö‡∏õ‡∏∞‡∏£‡∏î (Bromeliaceae) ‚Üí ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß"},
  {q:"‡∏´‡∏±‡∏ß‡∏´‡∏≠‡∏° (Allium cepa)", mono:true,  exp:"‡∏ß‡∏á‡∏®‡πå‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°-‡∏´‡∏±‡∏ß‡∏´‡∏≠‡∏° (Amaryllidaceae) ‚Üí ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß"},
  {q:"‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏° (Allium sativum)", mono:true,  exp:"‡∏≠‡∏¢‡∏π‡πà‡∏™‡∏Å‡∏∏‡∏• Allium ‡πÄ‡∏ä‡πà‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏´‡∏≠‡∏° ‚Üí ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß"},
  {q:"‡∏ß‡πà‡∏≤‡∏ô‡∏´‡∏≤‡∏á‡∏à‡∏£‡∏∞‡πÄ‡∏Ç‡πâ (Aloe vera)", mono:true,  exp:"‡∏ß‡∏á‡∏®‡πå Asphodelaceae ‚Üí ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß"},
  {q:"‡∏Ç‡∏¥‡∏á (Zingiber officinale)", mono:true,  exp:"‡∏ß‡∏á‡∏®‡πå‡∏Ç‡∏¥‡∏á‡∏Ç‡πà‡∏≤ (Zingiberaceae) ‚Üí ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß"},

  {q:"‡∏Å‡∏∏‡∏´‡∏•‡∏≤‡∏ö (Rosa spp.)", mono:false, exp:"‡∏ß‡∏á‡∏®‡πå Rosaceae ‚Üí ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ñ‡∏π‡πà"},
  {q:"‡∏ó‡∏≤‡∏ô‡∏ï‡∏∞‡∏ß‡∏±‡∏ô (Helianthus annuus)", mono:false, exp:"‡∏ß‡∏á‡∏®‡πå Asteraceae ‚Üí ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ñ‡∏π‡πà"},
  {q:"‡∏ñ‡∏±‡πà‡∏ß‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á (Glycine max)", mono:false, exp:"‡∏ß‡∏á‡∏®‡πå‡∏ñ‡∏±‡πà‡∏ß (Fabaceae) ‚Üí ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ñ‡∏π‡πà"},
  {q:"‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏® (Solanum lycopersicum)", mono:false, exp:"‡∏ß‡∏á‡∏®‡πå Solanaceae ‚Üí ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ñ‡∏π‡πà"},
  {q:"‡∏ü‡∏±‡∏Å‡∏ó‡∏≠‡∏á (Cucurbita spp.)", mono:false, exp:"‡∏ß‡∏á‡∏®‡πå‡πÅ‡∏ï‡∏á (Cucurbitaceae) ‚Üí ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ñ‡∏π‡πà"},
  {q:"‡πÅ‡∏ï‡∏á‡∏Å‡∏ß‡∏≤ (Cucumis sativus)", mono:false, exp:"‡∏ß‡∏á‡∏®‡πå‡πÅ‡∏ï‡∏á ‚Üí ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ñ‡∏π‡πà"},
  {q:"‡∏°‡∏±‡∏ô‡∏ù‡∏£‡∏±‡πà‡∏á (Solanum tuberosum)", mono:false, exp:"‡∏ß‡∏á‡∏®‡πå Solanaceae ‚Üí ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ñ‡∏π‡πà"},
  {q:"‡∏°‡∏∞‡∏°‡πà‡∏ß‡∏á (Mangifera indica)", mono:false, exp:"‡∏ß‡∏á‡∏®‡πå Anacardiaceae ‚Üí ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ñ‡∏π‡πà"},
  {q:"‡∏Å‡∏≤‡πÅ‡∏ü (Coffea spp.)", mono:false, exp:"‡∏ß‡∏á‡∏®‡πå Rubiaceae ‚Üí ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ñ‡∏π‡πà"},
  {q:"‡∏ú‡∏±‡∏Å‡∏Å‡∏≤‡∏î‡∏´‡∏≠‡∏° (Lactuca sativa)", mono:false, exp:"‡∏ß‡∏á‡∏®‡πå Asteraceae ‚Üí ‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ñ‡∏π‡πà"}
];

// -------- Utilities --------
function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const r = Math.floor(Math.random()*(i+1));
    [arr[i], arr[r]] = [arr[r], arr[i]];
  }
  return arr;
}

// Interleave mono/dico so no long runs (>2) and still random overall
(function balanceAndShuffle(){
  const mono = QUESTIONS.filter(q=>q.mono===true);
  const dico = QUESTIONS.filter(q=>q.mono===false);
  shuffle(mono); shuffle(dico);
  const total = QUESTIONS.length;
  const out = [];
  let i=0,j=0, lastType=null, run=0;
  while(out.length < total){
    // choose which bucket: prefer the one with more remaining, but avoid >2 run
    const remainMono = mono.length - i;
    const remainDico = dico.length - j;
    let pickMono;
    if(lastType===true && run>=2) pickMono = false;      // force switch
    else if(lastType===false && run>=2) pickMono = true; // force switch
    else if(remainMono===0) pickMono = false;
    else if(remainDico===0) pickMono = true;
    else{
      // weighted random by remaining
      const totalRem = remainMono + remainDico;
      pickMono = (Math.random()*totalRem) < remainMono;
    }
    if(pickMono){
      out.push(mono[i++]); 
      if(lastType===true) run++; else { lastType=true; run=1; }
    }else{
      out.push(dico[j++]);
      if(lastType===false) run++; else { lastType=false; run=1; }
    }
  }
  QUESTIONS = out;
})();

// Assign left/right answer positions ONCE (balanced overall, unpredictable per load)
(function assignBinaryPositionsOnce(){
  const n = QUESTIONS.length;
  let positions = [];
  while(positions.length < n){ positions = positions.concat([0,1]); } // 0-left, 1-right
  positions = positions.slice(0, n);
  shuffle(positions);
  for(let i=0;i<n;i++){
    const q = QUESTIONS[i];
    const target = positions[i];
    const optMono = "‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß";
    const optDico = "‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ñ‡∏π‡πà";
    if(q.mono){
      q._opts = (target===0)? [optMono,optDico]:[optDico,optMono];
      q._ansIndex = (target===0)? 0:1;
    }else{
      q._opts = (target===0)? [optDico,optMono]:[optMono,optDico];
      q._ansIndex = (target===0)? 0:1;
    }
  }
})();

let idx = 0;
const total = QUESTIONS.length;
const answers = new Array(total).fill(null);
let playerName = "";

const el = (id) => document.getElementById(id);

function updateMeta(){
  el("qIndexMeta").textContent = (document.getElementById("screen-quiz").classList.contains("hidden")) ? 0 : (idx+1);
  el("qTotalMeta").textContent = total;
  if(playerName){
    el("playerNameMeta").textContent = "üë§ " + playerName;
    el("playerNameMeta").classList.remove("hidden");
  }
}

function renderQuestion(){
  const q = QUESTIONS[idx];
  const wrap = el("optWrap");
  el("pillIdx").textContent = `‡∏Ç‡πâ‡∏≠ ${idx+1}/${total}`;
  el("qText").textContent = q.q;

  wrap.innerHTML = "";
  q._opts.forEach((text, i)=>{
    const id = `opt_${idx}_${i}`;
    const row = document.createElement("label");
    row.className = "opt";
    row.innerHTML = `<input type="radio" name="q${idx}" id="${id}" ${answers[idx]===i? 'checked':''}>
                     <span class="letter">${String.fromCharCode(65+i)})</span>
                     <span>${text}</span>`;
    row.querySelector("input").addEventListener("change",()=>{ answers[idx]=i; });
    wrap.appendChild(row);
  });
  const ratio = (idx)/total;
  el("progressBar").style.width = `${Math.max(0, Math.min(100, Math.floor(ratio*100)))}%`;
  el("btnPrev").disabled = (idx===0);
  el("btnNext").textContent = (idx === total-1) ? "‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡∏∏‡∏õ ‚ûú" : "‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡πÑ‡∏õ ‚û°";
  el("btnFinish").classList.toggle("hidden", idx !== total-1);
  updateMeta();
}

function show(sectionId){
  ["screen-start","screen-quiz","screen-result"].forEach(id=> el(id).classList.add("hidden"));
  el(sectionId).classList.remove("hidden");
  updateMeta();
}

function calcScore(){
  let score = 0;
  const rows = [];
  QUESTIONS.forEach((q,i)=>{
    const correct = q._ansIndex;
    const user = answers[i];
    const ok = (user===correct);
    if(ok) score++;
    rows.push({i, ok, user, correct});
  });
  return {score, rows};
}

function makeResult(){
  const {score, rows} = calcScore();
  el("scoreBig").textContent = `${score}/${total}`;
  el("scoreLine").textContent = score >= Math.ceil(total*0.7) ? "‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡πÄ‡∏•‡∏¢! ‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå üèÜ" : "‡∏™‡∏π‡πâ‡∏ï‡πà‡∏≠‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î ‡πÉ‡∏Å‡∏•‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß üí™";
  const list = el("resultList");
  list.innerHTML = "";
  rows.forEach(({i, ok, user, correct})=>{
    const q = QUESTIONS[i];
    const item = document.createElement("div");
    item.className = "result-item " + (ok? "ok": "");
    const ua = user!=null ? `${String.fromCharCode(65+user)}) ${q._opts[user]}` : "‚Äî ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‚Äî";
    const ca = `${String.fromCharCode(65+correct)}) ${q._opts[correct]}`;
    const explain = q.exp || (q.mono ? "‡∏û‡∏∑‡∏ä‡∏ô‡∏µ‡πâ‡∏à‡∏±‡∏î‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß" : "‡∏û‡∏∑‡∏ä‡∏ô‡∏µ‡πâ‡∏à‡∏±‡∏î‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ñ‡∏π‡πà");
    item.innerHTML = `
      <div class="item-head">
        <div><strong>‡∏Ç‡πâ‡∏≠ ${i+1}.</strong> ${q.q}</div>
        <div class="pill" style="border-color:${ok?'#bbf7d0':'#fecaca'}; background:${ok?'#f0fdf4':'#fff1f2'}; color:${ok?'#166534':'#991b1b'}">${ok? "‚úî ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á": "‚úò ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å"}</div>
      </div>
      <div class="answer-line"><strong>‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:</strong> ${ua}</div>
      <div class="answer-line"><strong>‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å:</strong> ${ca}</div>
      <div class="explain">${explain}</div>
    `;
    list.appendChild(item);
  });

  // Knowledge grid
  const KNOW = [
    // Monocots (15)
    {name:"‡∏Ç‡πâ‡∏≤‡∏ß", mono:true}, {name:"‡∏Ç‡πâ‡∏≤‡∏ß‡πÇ‡∏û‡∏î", mono:true}, {name:"‡πÑ‡∏ú‡πà", mono:true},
    {name:"‡∏Å‡∏•‡πâ‡∏ß‡∏¢", mono:true}, {name:"‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß", mono:true}, {name:"‡∏™‡∏±‡∏ö‡∏õ‡∏∞‡∏£‡∏î", mono:true},
    {name:"‡∏´‡∏±‡∏ß‡∏´‡∏≠‡∏°", mono:true}, {name:"‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°", mono:true}, {name:"‡∏ß‡πà‡∏≤‡∏ô‡∏´‡∏≤‡∏á‡∏à‡∏£‡∏∞‡πÄ‡∏Ç‡πâ", mono:true},
    {name:"‡∏Ç‡∏¥‡∏á", mono:true}, {name:"‡πÄ‡∏ú‡∏∑‡∏≠‡∏Å", mono:true}, {name:"‡∏Å‡∏Å", mono:true},
    {name:"‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡πÑ‡∏°‡πâ", mono:true}, {name:"‡∏Ç‡πâ‡∏≤‡∏ß‡∏™‡∏≤‡∏•‡∏µ", mono:true}, {name:"‡∏´‡∏ç‡πâ‡∏≤‡πÅ‡∏û‡∏£‡∏Å", mono:true},
    // Dicots (15)
    {name:"‡∏Å‡∏∏‡∏´‡∏•‡∏≤‡∏ö", mono:false}, {name:"‡∏ó‡∏≤‡∏ô‡∏ï‡∏∞‡∏ß‡∏±‡∏ô", mono:false}, {name:"‡∏ñ‡∏±‡πà‡∏ß‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á", mono:false},
    {name:"‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®", mono:false}, {name:"‡∏ü‡∏±‡∏Å‡∏ó‡∏≠‡∏á", mono:false}, {name:"‡πÅ‡∏ï‡∏á‡∏Å‡∏ß‡∏≤", mono:false},
    {name:"‡∏°‡∏±‡∏ô‡∏ù‡∏£‡∏±‡πà‡∏á", mono:false}, {name:"‡∏°‡∏∞‡∏°‡πà‡∏ß‡∏á", mono:false}, {name:"‡∏Å‡∏≤‡πÅ‡∏ü", mono:false},
    {name:"‡∏ú‡∏±‡∏Å‡∏Å‡∏≤‡∏î‡∏´‡∏≠‡∏°", mono:false}, {name:"‡∏û‡∏£‡∏¥‡∏Å", mono:false}, {name:"‡∏Ñ‡∏∞‡∏ô‡πâ‡∏≤", mono:false},
    {name:"‡∏°‡∏∞‡∏ô‡∏≤‡∏ß", mono:false}, {name:"‡∏ä‡∏ö‡∏≤", mono:false}, {name:"‡∏ú‡∏±‡∏Å‡∏ä‡∏µ", mono:false}
  ];
  const grid = document.getElementById("knowGrid");
  grid.innerHTML = "";
  KNOW.forEach(x=>{
    const chip = document.createElement("div");
    chip.className = "chip " + (x.mono ? "":"dico");
    chip.innerHTML = `<span>${x.name}</span><span>${x.mono? "‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß":"‡∏Ñ‡∏π‡πà"}</span>`;
    grid.appendChild(chip);
  });
}

// events
document.getElementById("btnStart").addEventListener("click", ()=>{
  playerName = (el("playerName").value || "").trim();
  if(!playerName){ alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö"); return; }
  show("screen-quiz");
  idx = 0; renderQuestion();
});
document.getElementById("btnPrev").addEventListener("click", ()=>{ if(idx>0){ idx--; renderQuestion(); }});
document.getElementById("btnNext").addEventListener("click", ()=>{
  if(answers[idx]==null){ if(!confirm("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) return; }
  if(idx < total-1){ idx++; renderQuestion(); }
  else{ show("screen-result"); makeResult(); }
});
document.getElementById("btnFinish").addEventListener("click", ()=>{ show("screen-result"); makeResult(); });
document.getElementById("btnSave").addEventListener("click", ()=>{
  if(answers[idx]==null){ alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å"); return; }
  const btn = el("btnSave"); const old = btn.textContent; btn.textContent = "‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß"; setTimeout(()=>btn.textContent=old, 900);
});
document.getElementById("btnRetry").addEventListener("click", ()=>{
  answers.fill(null); idx = 0; show("screen-start"); el("playerName").value=""; el("playerNameMeta").classList.add("hidden"); el("progressBar").style.width="0%";
});
// init
el("qTotalMeta").textContent = QUESTIONS.length; updateMeta();
</script>
</body>
</html>
